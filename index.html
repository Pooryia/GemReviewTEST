<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="Interactive grid animation with particle effects. Click cells to flip them and create beautiful animations.">
    <meta name="keywords" content="grid, animation, interactive, particles, javascript, css">
    <meta name="author" content="Grid Animation App">
    <meta name="theme-color" content="#2c1654">
    <meta name="color-scheme" content="dark">
    
    <!-- Performance hints -->
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Grid Animation">
    <meta property="og:description" content="Interactive grid animation with particle effects">
    <meta property="og:site_name" content="Grid Animation App">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Grid Animation">
    <meta name="twitter:description" content="Interactive grid animation with particle effects">
    
    <title>Grid Animation - Interactive Particle Effects</title>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="styles.css" as="style">
    <link rel="preload" href="script.js" as="script">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Favicon (placeholder) -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><rect width='16' height='16' fill='%232c1654'/><rect x='2' y='2' width='12' height='12' fill='none' stroke='%235a1b9a' stroke-width='1'/></svg>">
</head>
<body>
    <!-- Skip link for screen readers -->
    <a href="#main" class="skip-link" aria-label="Skip to main content">Skip to main content</a>
    
    <!-- Main application container -->
    <main id="main" role="main" aria-label="Interactive Grid Animation">
        <div class="container" role="application" aria-label="Grid of interactive cells">
            <!-- Screen reader instructions -->
            <div class="sr-only" id="instructions">
                Interactive grid with 81 cells arranged in a 9x9 pattern. 
                Click or tap any cell to flip it and create particle effects. 
                Try to flip all cells to see the completion animation.
                Use arrow keys to navigate between cells and spacebar or enter to activate them.
            </div>
            
            <!-- Grid container with accessibility features -->
            <div id="grid" 
                 role="grid" 
                 aria-label="9x9 interactive grid" 
                 aria-describedby="instructions"
                 tabindex="0"
                 data-total-cells="81"
                 data-flipped-cells="0">
                <!-- Grid cells will be dynamically generated here -->
            </div>
            
            <!-- Canvas for particle effects -->
            <canvas id="particleCanvas" 
                    aria-hidden="true" 
                    role="presentation"
                    width="600" 
                    height="600">
                <!-- Fallback for browsers without canvas support -->
                <p>Your browser does not support the HTML5 canvas element required for particle effects.</p>
            </canvas>
            
            <!-- Status announcements for screen readers -->
            <div id="status" class="sr-only" role="status" aria-live="polite" aria-atomic="true"></div>
            <div id="alert" class="sr-only" role="alert" aria-live="assertive" aria-atomic="true"></div>
        </div>
        
        <!-- Help/Instructions panel (initially hidden) -->
        <div id="help-panel" class="help-panel" aria-hidden="true" role="dialog" aria-labelledby="help-title">
            <div class="help-content">
                <h2 id="help-title">How to Play</h2>
                <ul>
                    <li><strong>Mouse:</strong> Click on any cell to flip it</li>
                    <li><strong>Keyboard:</strong> Use arrow keys to navigate, Space/Enter to flip</li>
                    <li><strong>Touch:</strong> Tap any cell to flip it</li>
                    <li><strong>Goal:</strong> Flip all cells to see the completion animation</li>
                </ul>
                <button id="close-help" aria-label="Close help panel">Close</button>
            </div>
        </div>
        
        <!-- Settings panel -->
        <div id="settings-panel" class="settings-panel" aria-hidden="true" role="dialog" aria-labelledby="settings-title">
            <div class="settings-content">
                <h2 id="settings-title">Settings</h2>
                
                <div class="setting-group">
                    <label for="theme-selector">Theme:</label>
                    <select id="theme-selector" class="setting-control">
                        <option value="default">Purple Galaxy</option>
                        <option value="ocean">Ocean Blue</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <label for="grid-size-slider">Grid Size: <span id="grid-size-value">9</span>x<span id="grid-size-value-2">9</span></label>
                    <input type="range" id="grid-size-slider" class="setting-control" min="3" max="12" value="9" step="1">
                </div>
                
                <div class="setting-group">
                    <label for="game-mode-selector">Game Mode:</label>
                    <select id="game-mode-selector" class="setting-control">
                        <option value="freeplay">Free Play</option>
                        <option value="pattern">Pattern Mode</option>
                    </select>
                </div>
                
                <div class="stats-section">
                    <h3>Statistics</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">Games Played:</span>
                            <span class="stat-value" id="stat-games-played">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Games Completed:</span>
                            <span class="stat-value" id="stat-games-completed">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Total Clicks:</span>
                            <span class="stat-value" id="stat-total-clicks">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Total Flips:</span>
                            <span class="stat-value" id="stat-total-flips">0</span>
                        </div>
                    </div>
                    
                    <div class="best-times">
                        <h4>Best Times</h4>
                        <div id="best-times-list">No times recorded yet</div>
                    </div>
                </div>
                
                <button id="close-settings" aria-label="Close settings panel">Close</button>
            </div>
        </div>
        
        <!-- Enhanced Controls panel -->
        <div class="controls" role="toolbar" aria-label="Grid controls">
            <button id="help-button" 
                    type="button" 
                    aria-label="Show help and instructions"
                    title="Show help and instructions">
                <span aria-hidden="true">?</span>
                <span class="sr-only">Help</span>
            </button>
            
            <button id="settings-button" 
                    type="button" 
                    aria-label="Open settings panel"
                    title="Settings">
                <span aria-hidden="true">‚öôÔ∏è</span>
                <span class="sr-only">Settings</span>
            </button>
            
            <button id="reset-button" 
                    type="button" 
                    aria-label="Reset all cells to unflipped state"
                    title="Reset grid">
                <span aria-hidden="true">‚Ü∫</span>
                <span class="sr-only">Reset</span>
            </button>
            
            <button id="save-button" 
                    type="button" 
                    aria-label="Save current game state"
                    title="Save game">
                <span aria-hidden="true">üíæ</span>
                <span class="sr-only">Save</span>
            </button>
            
            <button id="load-button" 
                    type="button" 
                    aria-label="Load saved game state"
                    title="Load game">
                <span aria-hidden="true">üìÇ</span>
                <span class="sr-only">Load</span>
            </button>
            
            <button id="mute-button" 
                    type="button" 
                    aria-label="Mute sound effects"
                    title="Toggle sound"
                    aria-pressed="false">
                <span aria-hidden="true">üîä</span>
                <span class="sr-only">Sound on</span>
            </button>
            
            <!-- Timer display -->
            <div class="timer-display">
                <span id="timer-display">0:00</span>
            </div>
            
            <!-- Progress indicator -->
            <div class="progress-container" role="progressbar" 
                 aria-label="Grid completion progress" 
                 aria-valuenow="0" 
                 aria-valuemin="0" 
                 aria-valuemax="81">
                <span class="progress-text"><span id="progress-current">0</span> / <span id="progress-total">81</span></span>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 0%"></div>
                </div>
            </div>
            
            <!-- Performance monitor (developer feature) -->
            <div class="performance-display" id="performance-display" style="font-size: 10px; color: rgba(255,255,255,0.5);">FPS: 0</div>
        </div>
    </main>
    
    <!-- Error boundary for graceful degradation -->
    <noscript>
        <div class="noscript-fallback">
            <h1>Grid Animation</h1>
            <p>This interactive grid animation requires JavaScript to function properly.</p>
            <p>Please enable JavaScript in your browser to experience the full application.</p>
            <div class="static-grid">
                <!-- Static grid representation for no-JS users -->
                <div class="static-cell"></div>
                <div class="static-cell"></div>
                <div class="static-cell"></div>
                <div class="static-cell"></div>
                <div class="static-cell"></div>
                <div class="static-cell"></div>
                <div class="static-cell"></div>
                <div class="static-cell"></div>
                <div class="static-cell"></div>
            </div>
        </div>
    </noscript>
    
    <!-- Performance monitoring (optional) -->
    <script>
        // Basic performance monitoring
        if ('performance' in window && 'measure' in performance) {
            window.addEventListener('load', () => {
                performance.mark('app-load-complete');
                const loadTime = performance.getEntriesByType('navigation')[0].loadEventEnd - 
                                performance.getEntriesByType('navigation')[0].loadEventStart;
                console.log(`App loaded in ${loadTime}ms`);
            });
        }
    </script>
    
    <!-- Main application script -->
    <script src="script.js" defer></script>
</body>
</html> 